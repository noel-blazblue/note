参考文章：https://www.cnblogs.com/fundebug/p/differences-of-tcp-and-udp.html

TCP协议全称是传输控制协议，是一种面向连接的、可靠的、基于字节流的传输层通信协议

由 IETF 的RFC 793定义。TCP 是面向连接的、可靠的流协议。流就是指不间断的数据结构，你可以把它想象成排水管中的水流。

## 特点
-   面向连接
    面向连接，是指发送数据之前必须在两端建立连接。建立连接的方法是“三次握手”，这样能建立可靠的连接。建立连接，是为数据的可靠传输打下了基础。
    
-   仅支持单播传输
    每条TCP传输连接只能有两个端点，只能进行点对点的数据传输，不支持多播和广播传输方式。

-   面向字节流
		TCP不像UDP一样那样一个个报文独立地传输，而是在不保留报文边界的情况下以字节流方式进行传输。

-   可靠传输
    对于可靠传输，判断丢包，误码靠的是TCP的段编号以及确认号。TCP为了保证报文传输的可靠，就给每个包一个序号，同时序号也保证了传送到接收端实体的包的按序接收。然后接收端实体对已成功收到的字节发回一个相应的确认(ACK)；如果发送端实体在合理的往返时延(RTT)内未收到确认，那么对应的数据（假设丢失了）将会被重传。
    
-   提供拥塞控制
			当网络出现拥塞的时候，TCP能够减小向网络注入数据的速率和数量，缓解拥塞

-   TCP提供全双工通信
		TCP允许通信双方的应用程序在任何时候都能发送数据，因为TCP连接的两端都设有缓存，用来临时存放双向通信的数据。当然，TCP可以立即发送一个数据段，也可以缓存一段时间以便一次发送更多的数据段（最大的数据段大小取决于MSS）


## TCP服务器最大并发连接数
关于TCP服务器最大并发连接数有一种误解就是“因为端口号上限为65535,所以TCP服务器理论上的可承载的最大并发连接数也是65535”。首先需要理解一条TCP连接的组成部分：**客户端IP、客户端端口、服务端IP、服务端端口**。所以对于TCP服务端进程来说，他可以同时连接的客户端数量并不受限于可用端口号，理论上一个服务器的一个端口能建立的连接数是`全球的IP数*每台机器的端口数`。实际并发连接数受限于linux可打开文件数，这个数是可以配置的，可以非常大，所以实际上受限于系统性能。通过`#ulimit -n` 查看服务的最大文件句柄数，通过`ulimit -n xxx` 修改 xxx是你想要能打开的数量。也可以通过修改系统参数：

```js
#vi /etc/security/limits.conf
*　　soft　　nofile　　65536
*　　hard　　nofile　　65536
```