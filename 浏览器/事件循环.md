浏览器的一帧：鼠标和键盘事件，1个宏任务，所有微任务，`requestAnimationCallback`, `requestIdleCallback`

1.  从任务队列中取出一个**宏任务**并执行。  
    
2.  检查微任务队列，执行并清空**微任务**队列，如果在微任务的执行中又加入了新的微任务，也会在这一步一起执行。  
    
3.  进入更新渲染阶段，判断是否需要渲染，这里有一个 `rendering opportunity` 的概念，也就是说不一定每一轮 event loop 都会对应一次浏览 器渲染，要根据屏幕刷新率、页面性能、页面是否在后台运行来共同决定，通常来说这个渲染间隔是固定的。（所以多个 task 很可能在一次渲染之间执行）